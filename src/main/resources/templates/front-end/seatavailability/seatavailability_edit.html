<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>å¾®å¶¼ | ç·¨è¼¯æ¥é§åº§ä½</title>

  <!-- è¼‰å…¥å¾Œå°å…±ç”¨æ¨£å¼ -->
  <th:block th:replace="~{fragments/backFragments :: styles}"></th:block>
</head>
<body>
  <!-- è¼‰å…¥å´é‚Šæ¬„ -->
  <div th:replace="~{fragments/backFragments :: mobileSidebar}"></div>
  <div th:replace="~{fragments/backFragments :: sidebar}"></div>

  <!-- ä¸»å…§å®¹å€å¡Š -->
  <main th:replace="~{fragments/backFragments :: mainContent(~{::myContent})}">
    <th:block th:fragment="myContent">
      <h2 class="mb-4 fw-bold">ğŸ›  ç·¨è¼¯åº§ä½å¯ç”¨æƒ…æ³</h2>

      <form th:action="@{/seatavailability/edit}" th:object="${seatavailability}" method="post" class="needs-validation" novalidate>
        <!-- éš±è—ä¸»éµæ¬„ä½ -->
        <input type="hidden" th:field="*{scheduleId}" />
        <input type="hidden" th:field="*{date}" />

        <!-- é¡¯ç¤ºç­æ¬¡è³‡è¨Šï¼ˆåªè®€ï¼‰ -->
        <div class="mb-3">
          <label class="form-label">ç­æ¬¡</label>
          <input type="text" class="form-control" readonly
                 th:value="|${#temporals.format(seatavailability.schedule.departureTime, 'HH:mm')} ~ ${#temporals.format(seatavailability.schedule.arrivalTime, 'HH:mm')} (${seatavailability.schedule.direction == 0 ? 'å»ç¨‹' : 'å›ç¨‹'})|">
        </div>

        <!-- é¡¯ç¤ºæ—¥æœŸï¼ˆåªè®€ï¼‰ -->
        <div class="mb-3">
          <label class="form-label">æ¥é§æ—¥æœŸ</label>
          <input type="text" class="form-control" readonly th:value="${seatavailability.date}" />
        </div>

        <!-- å¯ç”¨åº§ä½æ•¸ -->
        <div class="mb-3">
          <label for="seatQuantity" class="form-label">å¯ç”¨åº§ä½æ•¸</label>
          <input type="number" class="form-control" id="seatQuantity" min="0" required th:field="*{seatQuantity}" />
          <div class="invalid-feedback">è«‹è¼¸å…¥å¯ç”¨åº§ä½æ•¸ï¼ˆä¸å¯ç‚ºè² æ•¸ï¼‰</div>
        </div>

        <!-- æŒ‰éˆ•å€å¡Š -->
        <div class="d-flex justify-content-start mt-4">
          <button type="submit" class="btn btn-primary">æ›´æ–°</button>
          <a th:href="@{/seatavailability/list}" class="btn btn-secondary ms-3">å–æ¶ˆ</a>
        </div>
      </form>
    </th:block>
  </main>

  <!-- é©—è­‰ JS -->
  <script>
    (() => {
      'use strict';
      const forms = document.querySelectorAll('.needs-validation');
      Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();
  </script>
</body>
</html>
