<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>微嶼 | Isle Villa 後台首頁</title>
<script>
	function submitForm() {
		const id = document.getElementById("shuttleId").value;
		if (id) {
			window.location.href = "/shuttle/get/" + id;
		} else {
			alert("請輸入班次編號");
		}
	}
</script>
<!-- ===== 載入統一樣式 ===== -->
<th:block th:replace="~{fragments/backFragments :: styles}"></th:block>
</head>
<body>
	<!-- ===== 載入sidebar ===== -->
	<!-- 插入手機版側邊欄 -->
	<div th:replace="~{fragments/backFragments :: mobileSidebar}"></div>
	<!-- 插入桌面版側邊欄 -->
	<div th:replace="~{fragments/backFragments :: sidebar}"></div>

	<main
		th:replace="~{fragments/backFragments :: mainContent(~{::myContent})}">
		<th:block th:fragment="myContent">
			<!-- //////////////////// 頁面內容放在這個card裡面(外框已經有加card和container，直接放入table和標題即可)//////////////////// -->
			<h2 class="mb-4" >🔍 接駁時段查詢</h2>
			<div class="mb-3">
    <label for="shuttleId" class="form-label">選擇時段：</label>
    <select id="shuttleId" name="shuttleId" class="form-select">
        <option value="" disabled th:if="${shuttle == null}" selected>請選擇班次</option>
        <option th:each="s : ${allShuttleSchedules}"
                th:value="${s.id}"
                th:text="${s.id} + ' | ' + (${s.direction} == 0 ? '去程' : '回程') + ' - ' + ${s.departureTime} + ' → ' + ${s.arrivalTime}"
                th:selected="${shuttle != null} ? ${s.id} == ${shuttle.id} : false">
        </option>
    </select>
</div>

			<button class="btn btn-primary" onclick="submitForm()">查詢</button>
			<a href="/shuttle/list" class="btn btn-secondary">返回列表</a>

			<hr />
			<div th:if="${shuttle != null}">
				<h3 class="mt-4">班次明細</h3>
				<table class="table table-bordered">
					<tr>
						<th>班次編號</th>
						<td th:text="${shuttle.id}">班次編號</td>
					</tr>
					<tr>
						<th>方向</th>
						<td th:text="${shuttle.direction == 0 ? '去程' : '回程'}">方向</td>
					</tr>
					<tr>
						<th>出發時間</th>
						<td th:text="${shuttle.departureTime}">出發時間</td>
					</tr>
					<tr>
						<th>抵達時間</th>
						<td th:text="${shuttle.arrivalTime}">抵達時間</td>
					</tr>
				</table>
			</div>
			<div th:if="${shuttle == null and not #strings.isEmpty(errorMsg)}"
				class="alert alert-danger mt-4" th:text="${errorMsg}"></div>
	</main>
<!-- //////////////////// 頁面內容放在這個card裡面//////////////////// -->
	</th:block>
	</main>
</body>
</html>
